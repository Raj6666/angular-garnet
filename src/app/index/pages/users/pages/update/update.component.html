<div class="update-wrap inner-container">
  <nz-card nzType="inner" nzTitle="新增/修改">
    <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
      <nz-form-item class="update-form-item">
        <nz-form-label [nzSpan]="3" nzRequired>账号</nz-form-label>
        <nz-form-control [nzSpan]="8" nzErrorTip="请输入账号">
          <input nz-input formControlName="userName"/>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item class="update-form-item">
        <nz-form-label [nzSpan]="3">邮箱</nz-form-label>
        <nz-form-control [nzSpan]="8" nzErrorTip="请输入正确的邮箱">
          <input nz-input formControlName="email"/>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item class="update-form-item">
        <nz-form-label [nzSpan]="3">手机号</nz-form-label>
        <nz-form-control [nzSpan]="8" nzErrorTip="请输入正确的手机号">
          <input nz-input pattern="[0-9-]*" formControlName="phone" maxlength="11"/>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item class="update-form-item">
        <nz-form-label [nzSpan]="3" nzRequired>密码</nz-form-label>
        <nz-form-control [nzSpan]="8" nzErrorTip="请输入密码">
          <input
            nz-input
            type="password"
            autocomplete="off"
            formControlName="password"
            (ngModelChange)="updateConfirmValidator()"
          />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item class="update-form-item">
        <nz-form-label [nzSpan]="3" nzRequired>确认密码</nz-form-label>
        <nz-form-control [nzSpan]="8" [nzErrorTip]="errorTpl">
          <input nz-input type="password" autocomplete="off" formControlName="checkPassword"/>
          <ng-template #errorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">
              请再次输入密码
            </ng-container>
            <ng-container *ngIf="control.hasError('confirm')">
              两次输入的密码不一致
            </ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item class="update-form-item">
        <nz-form-label [nzSpan]="3" nzRequired>关联租户</nz-form-label>
        <nz-form-control [nzSpan]="8" nzErrorTip="请输入关联租户">
          <nz-select class="multiple-select" nzMode="multiple" formControlName="relatedTenantSelectedValue">
            <nz-option
              *ngFor="let option of relatedTenantOption"
              [nzLabel]="option"
              [nzValue]="option"
              [nzHide]="hideOption('relatedTenantSelectedValue', option)"
            ></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item class="update-form-item">
        <nz-form-label [nzSpan]="3" nzRequired>关联组</nz-form-label>
        <nz-form-control [nzSpan]="8" nzErrorTip="请输入关联租户">
          <nz-select class="multiple-select" nzMode="multiple" formControlName="relatedGroupSelectedValue">
            <nz-option
              *ngFor="let option of relatedGroupOption"
              [nzLabel]="option"
              [nzValue]="option"
              [nzHide]="hideOption('relatedGroupSelectedValue', option)"
            ></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item class="update-form-item">
        <nz-form-control [nzSpan]="12" [nzOffset]="5">
          <button nz-button nzType="primary" class="confirm-btn">确认</button>
          <button nz-button routerLink="/index/users" [queryParamsHandling]="'merge'">返回</button>
        </nz-form-control>
      </nz-form-item>
    </form>
  </nz-card>
</div>
